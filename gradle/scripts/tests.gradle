test {
  useJUnitPlatform()
  testLogging {
    events = ["skipped", "failed"]
  }

  // Improve logging for failed Spock tests
  testLogging {
    exceptionFormat = "Full"
  }
}

tasks.register('unitTest', Test) {
  description = 'Run only unit tests.'
  group = 'Verification'

  filter {
    includeTestsMatching '*Test*.*'
    excludeTestsMatching '*IT'
  }
  useJUnitPlatform()
  testLogging {
    events = ["skipped", "failed"]
  }
}

tasks.register('integrationTest', Test) {
  description = 'Run only the integration tests.'
  group = 'Verification'

  filter {
    includeTestsMatching '*IT.*'
    excludeTestsMatching '*Test*.*'
  }
  useJUnitPlatform()
  testLogging {
    events = ["skipped", "failed"]
  }

  mustRunAfter unitTest
}